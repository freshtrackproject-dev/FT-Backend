services:
  - type: web
    name: freshtrack-backend
    env: docker
    plan: free
    region: singapore
    autoDeploy: true

    # Docker setup
    dockerfilePath: ./Dockerfile
    dockerCommand: node server.js

    # Environment variables
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3000
      - key: MODEL_PATH
        value: /app/models/best.onnx
      - key: STORAGE_PATH
        value: /app/data/storage_data.json

    # Health check endpoint (Render pings this)
    healthCheckPath: /health

    # Auto deploy only from main branch (optional, prevents random deploys)
    autoDeploy: true
    branch: main
